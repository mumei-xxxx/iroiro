---
title: "é­”ç†æ²™ã€ŒPureScript Jelly ã§ã€Reactãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ä¸‰ç›®ä¸¦ã¹ã®ã€Šç´”ç²‹é–¢æ•°å‹ï¼å‹å®‰å…¨ã€‹ç‰ˆã‚’ä½œã‚‹ãœã€"
emoji: "ğŸˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["PureScript"]
published: false
---

> **Moggi**ã¯ã€è¨ˆç®—åŠ¹æœã‚’å«ã‚“ã ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’**Kleisli**åœã®å°„ã¨ã¿ãªã™ã“ã¨ã«ã‚ˆã£ã¦ã€åœè«–çš„ã«ç‰©äº‹ã‚’ã†ã¾ãå–ã‚Šæ‰±ã†æ–¹æ³•ã‚’æå”±ã—ãŸã€‚
> è¨ˆç®—åŠ¹æœã‚’ãƒ¢ãƒŠãƒ‰ã«ã‚ˆã£ã¦æ‰ãˆã‚‹ã¨ã€ãƒ¢ãƒŠãƒ‰ã«ãŠã‘ã‚‹è‡ªç„¶å¤‰æ›Î¼ãŒã€Œåˆ†å²ã‚’ã†ã¾ãã¾ã¨ã‚ã‚‹ã€é‡è¦ãªåƒãã‚’ã™ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚
>
> ã€åœè«–ã®é“æ¡ˆå†… ~çŸ¢å°ã§ãˆãŒãæ•°å­¦ã®ä¸–ç•Œ~ã€[^1]

PureScript Advent Calendar 2022 ã®è¨˜äº‹ã§ã™ã€‚
https://qiita.com/advent-calendar/2022/purescript

## å®Œæˆã—ãŸã‚‚ã®

https://github.com/mumei-xxxx/purescript-sanmoku-dev0

![tic-tac-toe](/images/purescript-jelly-tic-tac-toe-01/tic-tac-toe.gif)

## æ¦‚ç•¥

é­”ç†æ²™ã€ŒReactã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã«ä¸‰ç›®ä¸¦ã¹ãŒã‚ã‚‹ã€‚ã€

https://ja.reactjs.org/tutorial/tutorial.html

@[codepen](https://codepen.io/gaearon/pen/LyyXgK?editors=0010)

éœŠå¤¢ã€Œä¸‰ç›®ãªã‚‰ã¹ã£ã¦ã€ä½•ï¼Ÿã€
é­”ç†æ²™ã€Œä¸‰ç›®ãªã‚‰ã¹ã¨ã¯ã€ãƒãƒ«ãƒãƒ„ã‚²ãƒ¼ãƒ ã ã€‚ä¸€æ‰‹ã”ã¨ã«äº¤äº’ã«å‡ç›®ã‚’â—‹ã‹Ã—ã§åŸ‹ã‚ã¦ã„ã£ã¦ã€ç¸¦ã‹æ¨ªã‹æ–œã‚ä¸€åˆ—ã«ãªã£ãŸã‚‚ã®ãŒå‹ã¡ãªã‚“ã ãœã€‚è‹±èªã§tic-tac-toeã¨ã„ã†ã€‚ã€
éœŠå¤¢ã€Œãªã‚‹ã»ã©ã­ã€‚ã€
é­”ç†æ²™ã€Œã“ã‚Œã‚’ä»Šå›ã¯ã€PureScript ã§ä½œã‚ã†ã¨æ€ã†ã€‚ã€
éœŠå¤¢ã€Œãªã‚“ã§ã€PureScript ã§ä½œã‚‹ã®ï¼Ÿã€
é­”ç†æ²™ã€Œç†å±ˆã‚’è¨€ãˆã°ã€ã„ã‚ã„ã‚ã‚ã‚‹ãŒã€å®Œå…¨ã«ãªã‚“ã¨ãªãã ãœã€‚ã€
éœŠå¤¢ã€Œãšã“ãƒ¼ã€‚ã€
é­”ç†æ²™ã€Œç´”ç²‹é–¢æ•°å‹ï¼å‹å®‰å…¨ï¼ã£ã¦ã„ã†ã®ãŒãªã‚“ã¨ãªãã‹ã£ã“ã„ã„ã€‚ãã—ã¦ã€PureScript ã¯ Haskell ã«å½±éŸ¿ã‚’å—ã‘ãŸè¨€èªã ã€‚ã ã‹ã‚‰ã€PureScript æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã¯åŸå‰‡ã€æ•°å­¦ã®åœè«–çš„ã«ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¹ãƒªåœã®å°„ã®åˆæˆã¨ã¿ãªã™ã“ã¨ãŒã§ãã‚‹ã€‚ã€
éœŠå¤¢ã€Œãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã‚¯ãƒ©ã‚¤ã‚¹ãƒªåœã®å°„ã®åˆæˆã¨ã—ãŸã‚‰ã€ã©ã†ã ã£ã¦ã„ã†ã®ï¼Ÿã€
é­”ç†æ²™ã€Œã‚ã‹ã‚‰ãªã„ã€‚ã‚ã‹ã‚‰ãªã„ãŒã€è‡ªåˆ†ã§å®Ÿéš›ã«ä½œã£ã¦ã¿ã¦ã€ã©ã†ã„ã†æ™¯è‰²ãŒè¦‹ãˆã‚‹ã®ã‹ã¨ã„ã†çŸ¥çš„å¥½å¥‡å¿ƒã ãœã€‚ã€
éœŠå¤¢ã€Œã€

éœŠå¤¢ã€Œãªã‚‹ã»ã©ã­ã€‚ãã‚Œã§ã€ä»Šå›ã¯ã€ã©ã‚“ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ã†ã®ï¼Ÿã€
é­”ç†æ²™ã€ŒPureScript ã®Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã„ãˆã°ã€Halogen ãŒæœ‰åã ã€‚ã—ã‹ã—ã€ä»Šå›ã¯ã€Zennã§ã‚‚è¨˜äº‹ã‚’å…¬é–‹ã•ã‚Œã¦ã„ãŸã‚†ããã‚‰ã’ã•ã‚“ãŒä½œã£ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚‹ã€‚PureScript Jelly ã‚’ä½¿ã†ãœã€‚ã€

https://jelly.yukikurage.net/

éœŠå¤¢ã€Œãªã‚“ã§ Halogen ã¯ä½¿ã‚ãªã„ã®ï¼Ÿã€
é­”ç†æ²™ã€ŒHalogen ã¯å˜ç´”ã«è¤‡é›‘ã§ã€æŒ«æŠ˜ã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã¨æ€ã£ãŸãœã€‚ã€
éœŠå¤¢ã€Œã€å˜ç´”ã«è¤‡é›‘ã€ã­ã€‚ã€
é­”ç†æ²™ã€Œã¾ãŸã€PureScript Jelly ã¯ã€SolidJSã‚’æ„è­˜ã—ã¦ã„ãŸã‚Šã€å‰²ã¨Reactãƒ©ã‚¤ã‚¯ã«æ›¸ã‘ã‚‹ã®ã§ã¯ã¨æ€ã£ãŸã‹ã‚‰ã ãœã€‚ã€
éœŠå¤¢ã€Œãªã‚‹ã»ã©ã­ã€‚ã€
é­”ç†æ²™ã€Œã¾ãŸã€Reactã®ä¸‰ç›®ãªã‚‰ã¹ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯ã€ã‚¿ã‚¤ãƒ ãƒã‚·ãƒ³æ©Ÿèƒ½ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã€‚ç«¯çš„ã«è¨€ã†ã¨ã€ã‚²ãƒ¼ãƒ å±¥æ­´æ©Ÿèƒ½ã ã€‚ã€
é­”ç†æ²™ã€Œã—ã‹ã—ã€ã“ã‚Œã‚’å…¥ã‚Œã‚‹ã¨ã€ã‚„ã‚„ãƒ­ã‚¸ãƒƒã‚¯ãŒè¾¼ã¿å…¥ã£ã¦ã€è¦‹ã›ãŸã„ã€PureScript ã‚„ Jelly ã®éƒ¨åˆ†ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«è¦‹ã‚Œã‚‰ã‚Œãªããªã‚‹ã€‚ã€
é­”ç†æ²™ã€Œã ã‹ã‚‰ã€ä»Šå›ã¯ã€ã‚¿ã‚¤ãƒ ãƒã‚·ãƒ³æ©Ÿèƒ½ã‚’ã®ãã„ãŸã€ç´”ç²‹ãªä¸‰ç›®ãªã‚‰ã¹ã®éƒ¨åˆ†ã‚’å®Ÿè£…ã—ã¦ã„ããœã€‚ã€
éœŠå¤¢ã€Œäº†è§£ã—ãŸã€‚ã€

ä»®æƒ³ DOM ã‚’ä½¿ã‚ãªã„ Web ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ 'Jelly' ã‚’ä½œã£ãŸ in PureScript
https://zenn.dev/yukikurage/articles/4735819c3b421b

## ç’°å¢ƒ/ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±

é­”ç†æ²™ã€Œãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã ã€‚ã€
é­”ç†æ²™ã€ŒJelly ã¯ç™ºå±•ä¸­ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã ã€‚ä»Šå¾Œã€ç ´å£Šçš„å¤‰æ›´ã§ã€ã“ã®è¨˜äº‹ã«æ›¸ã„ã¦ã‚ã‚‹ã“ã¨ãŒã€å¤ããªã‚‹å¯èƒ½æ€§ã¯äº†æ‰¿ã—ã¦ãŠã„ã¦æ¬²ã—ã„ãœã€‚ã€

Windows Home 11 / WSL / Ubuntu 20.04
Node.js 18.12.1
npm 8.19.2
PureScript 0.15.6
PureScript Jelly 0.8.1
PureScript Jelly Signal 0.3.0

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

é­”ç†æ²™ã€Œã“ã‚ŒãŒä»Šå›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã ã€‚ã€
é­”ç†æ²™ã€Œ`src` é…ä¸‹ã§é–‹ç™ºã—ã¦ã€ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸã‚‚ã®ãŒã€`public` é…ä¸‹ã«æ ¼ç´ã•ã‚Œã‚‹ãœã€‚ã€

```
.
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ packages.dhall
â”œâ”€â”€ public
â”‚Â Â  â”œâ”€â”€ index.css.map
â”‚Â Â  â”œâ”€â”€ index.html
â”‚Â Â  â”œâ”€â”€ index.js
â”‚Â Â  â”œâ”€â”€ style.css
â”‚Â Â  â””â”€â”€ style.css.map
â”œâ”€â”€ README.md
â”œâ”€â”€ spago.dhall
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ Components
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Board.purs
â”‚Â Â  â”‚Â Â  â””â”€â”€ Square.purs
â”‚Â Â  â”œâ”€â”€ Main.purs
â”‚Â Â  â”œâ”€â”€ style.scss
â”‚Â Â  â””â”€â”€ UseCases
â”‚Â Â      â””â”€â”€ calculateWinner.purs
â””â”€â”€ test
    â””â”€â”€ Main.purs
```

## ç’°å¢ƒæ§‹ç¯‰ã«ã¤ã„ã¦

é­”ç†æ²™ã€Œç’°å¢ƒæ§‹ç¯‰ã«é–¢ã—ã¦ã¯ã€PureScript Advent Calendar 2022 1æ—¥ç›®ã®ã‚†ããã‚‰ã’ã•ã‚“ã®è¨˜äº‹ã‚’å‚è€ƒã«ã•ã›ã¦ã‚‚ã‚‰ã£ãŸãœã€‚ã€

> PureScript + Halogen + Tailwind ã§ Web ãƒ•ãƒ­ãƒ³ãƒˆé–‹ç™ºç’°å¢ƒæ§‹ç¯‰ (in VSCode)
https://qiita.com/yukikurage_2019/items/a2c7b0d1d2c34aee120c


é­”ç†æ²™ã€Œé•ã„ã¯ã€Tailwind ã§ã¯ãªãã€Sassã‚’ä½¿ã£ã¦ã„ã‚‹ã“ã¨ã ãœã€‚ã€

```json:package.json
"scripts": {
    "install": "npx spago install",
    "bundle:script": "npx spago bundle-app -t ./public/index.js -y",
    "bundle:scss": "sass --error-css --style=compressed ./src/style.scss ./public/style.css",
    "bundle": "run-s bundle:*",
    "watch:script": "npx spago bundle-app -t ./public/index.js -w",
    "watch:scss": "sass --watch --error-css ./src/style.scss ./public/style.css",
    "watch:server": "npx live-server ./public",
    "watch": "run-p watch:*"
},
```

## calculateWinner å‹è€…åˆ¤å®š

é­”ç†æ²™ã€Œã¾ãšã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¤ã„ã¦ã€è§£èª¬ã™ã‚‹å‰ã«ã€calculateWinner é–¢æ•°ã«ã¤ã„ã¦ã ã€‚ã“ã®éƒ¨åˆ†ã«ã¤ã„ã¦ã¯ã€åˆ¥ã«è¨˜äº‹ã‚’ä½œã£ã¦è§£èª¬ã—ãŸã„ã‹ã‚‰ã€ã“ã“ã§ã¯ã€ç°¡å˜ã«è§¦ã‚Œã‚‹ã«ã¨ã©ã‚ã‚‹ã€‚ã€
éœŠå¤¢ã€Œäº†è§£ã—ãŸã€‚ã€
é­”ç†æ²™ã€Œã¨ã‚Šã‚ãˆãšã€ä»¥å‰ã€TypeScript ã§ä½œã£ãŸã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã‹ã‚‰ã€ãã‚Œã¨æ¯”è¼ƒã—ã¦ã„ããœã€‚ã€
é­”ç†æ²™ã€ŒTypeScriptã§ä½œã£ãŸã‚³ãƒ¼ãƒ‰ã®è©³ç´°ã«ã¤ã„ã¦ã¯ä»¥å‰æ›¸ã„ãŸä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦æ¬²ã—ã„ã€‚ã€

> Next.js + TypeScript + Recoil + Herpç¤¾ESLint Config ã§Reactãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ä½œã‚‹ã€‚

https://zenn.dev/purenium/articles/nextjs-recoil-tic-tac-toe


```ts:src/useCases/calculateWinner.ts
/**
 * @description [null, null, null, null, null, null, 'X', null, 'O']ã®ã‚ˆã†ãªé…åˆ—
 */
type SquareValueType = "X" | "O" | null
type BoardArrType = SquareValueType[]

/**
 * @description å‹è€…ã‚’åˆ¤å®šã™ã‚‹ã€‚
 */
export const calculateWinner = (squares: BoardArrType): SquareValueType => {
  const lines = [
    [0, 1, 2],
    [3, 4, 5],
    [6, 7, 8],
    [0, 3, 6],
    [1, 4, 7],
    [2, 5, 8],
    [0, 4, 8],
    [2, 4, 6]
  ]

  for (const line of lines) {
    const [a, b, c] = line
    // ç¸¦ã€æ¨ªã€å¯¾è§’ç·š ã§3ã¤Xã‚ã‚‹ã„ã¯ã€OãŒé€£ç¶šã™ã‚Œã°ã€é€£ç¶šã—ãŸvalueã‚’è¿”ã™ã€‚
    if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {
      return squares[a]
    }
  }
  return null
}

```

```purs:src/UseCases/calculateWinner.purs
module UseCases.Calculatewinner
  ( Board
  , SquareValueType(..)
  , calculateWinner
  , lines
  ) where

import Control.Alternative (guard)
import Data.Array (all, head, (!!))
import Data.Generic.Rep (class Generic)
import Data.Maybe (Maybe(..))
import Data.Show.Generic (genericShow)
import Prelude (class Eq, class Ord, class Show, bind, discard, pure, ($), (==))

lines :: Array (Array Int)
lines =
  [ [ 0, 1, 2 ]
  , [ 3, 4, 5 ]
  , [ 6, 7, 8 ]
  , [ 0, 3, 6 ]
  , [ 1, 4, 7 ]
  , [ 2, 5, 8 ]
  , [ 0, 4, 8 ]
  , [ 2, 4, 6 ]
  ]

data SquareValueType = X | O

derive instance Eq SquareValueType
derive instance Ord SquareValueType
derive instance Generic SquareValueType _

instance Show SquareValueType where
  show = genericShow

type Board = Array (Maybe SquareValueType)

calculateWinner :: Board -> Maybe SquareValueType
calculateWinner boardArr = head do
  line <- lines
  sv <- [ X, O ]
  guard $ all (\i -> boardArr !! i == Just (Just sv)) line
  pure sv

```

é­”ç†æ²™ã€Œæ ¹æœ¬ã®ãƒ­ã‚¸ãƒƒã‚¯è‡ªä½“ã¯ã€TypeScriptã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ã ã€‚ã€
é­”ç†æ²™ã€Œã¾ãšã€ä»¥ä¸‹ã®å‹ã«æ³¨ç›®ã ãœã€‚ã€

```purs
data SquareValueType = X | O
```

é­”ç†æ²™ã€Œã“ã‚ŒãŒã€å‡ç›®ã®å€¤ã‚’è¡¨ã™å‹ã ã€‚è¦ã™ã‚‹ã«ãƒãƒ«ãƒãƒ„ã‚²ãƒ¼ãƒ ã ã‹ã‚‰ã€`X` ã‹ `O`ã‹ã¨ã„ã†ã“ã¨ã ã€‚ã€
éœŠå¤¢ã€Œãªã‚‹ã»ã©ã­ã€‚ã€
é­”ç†æ²™ã€ŒãŸã ã€PureScript ã«ã¯ã€`null` ãŒãªã„ã€‚ã ã‹ã‚‰ã€`X` ã‹ `O` ã‹ `Nothing` ã‹ã® Maybeå€¤ã®é…åˆ—ã§å€¤ã‚’è€ƒãˆã¦ã„ãã“ã¨ã«ã™ã‚‹ã€‚ã¤ã¾ã‚Šã€ã€

```purs
type Board = Array (Maybe SquareValueType)
```

é­”ç†æ²™ã€Œã¨ã„ã†ã“ã¨ã ã€‚ã€
é­”ç†æ²™ã€Œç¹°ã‚Šè¿”ã—ã«ãªã‚‹ãŒã€`calculateWinner`é–¢æ•°ã«ã¤ã„ã¦ã¯ã€åˆ¥è¨˜äº‹ã§è§£èª¬ã™ã‚‹ãœã€‚ã€

## square ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆå‡ç›®éƒ¨åˆ†ï¼‰

é­”ç†æ²™ã€Œã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ããœã€‚ã€
é­”ç†æ²™ã€Œã¾ãšã¯ã€ä¸‰ç›®ãªã‚‰ã¹ã®å‡ç›®éƒ¨åˆ†ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã ã€‚ã€
é­”ç†æ²™ã€Œã“ã‚Œã‚‚ã€TypeScript ã§ä½œã£ãŸã‚³ãƒ¼ãƒ‰ã¨æ¯”è¼ƒã—ã¦ã„ããœã€‚ã€

```tsx:src/components/Square.tsx
interface SquarePropsType {
  value: SquareValueType
  onClick: () => void
}

/**
 * @description ä¸‰ç›®ãªã‚‰ã¹ã®å‡ç›®ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
 */
export const Square: React.FC<SquarePropsType> = ({ value, onClick }) => {

  return (
    <button className="square" onClick={onClick}>
      {value}
    </button>
  )
}
```

é­”ç†æ²™ã€Œæ¬¡ã«æ²è¼‰ã™ã‚‹ã®ãŒ PureScript ã®ã‚³ãƒ¼ãƒ‰ã ã€‚ã€

```purs:src/Components/Square.purs
module Components.Square
  ( SquarePropsType,
    squareComponent
  )
  where

import Prelude

import Jelly.Component (class Component, textSig)
import Jelly.Element as JE
import Jelly.Prop ((:=), on)
import Jelly.Signal (Signal)
import Data.Maybe (Maybe(..))
import UseCases.Calculatewinner (SquareValue(..))
import Web.HTML.Event.EventTypes (click)

type SquarePropsType m =
  { onClick :: m Unit
  , value :: Signal (Maybe SquareValue) }

squareComponent :: forall m. Component m => SquarePropsType m -> m Unit
squareComponent { onClick, value } = do
  JE.button [ "class" := "square", on click \_ -> onClick ] do
    textSig $ value <#> case _ of
      Just X -> "X"
      Just O -> "O"
      Nothing -> ""

```

é­”ç†æ²™ã€Œè§£èª¬ã®ãŸã‚ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¤šã‚ã«æ›¸ã„ãŸã€‚ã€
é­”ç†æ²™ã€Œã‚³ãƒ¡ãƒ³ãƒˆã¨é‡è¤‡ã™ã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŒèª¬æ˜ã—ã¦ã„ããœã€‚ã€
é­”ç†æ²™ã€Œã¾ãšã€`squareComponent` ã®å¼•æ•°ã®å‹ãŒ `SquarePropsType` ã ã€‚ã€
é­”ç†æ²™ã€Œ`onClick` ã«ã¤ã„ã¦ã¯ã‚¤ãƒ™ãƒ³ãƒˆé–¢æ•°ã ã€‚PureScript ã¯ã€Haskell ã¨åŒæ§˜ã€å¿…ãšè¿”ã‚Šå€¤ãŒå¿…è¦ãªã®ã§ã€`m Unit` ã‚’è¿”ã™ã€‚Unit ã¯PureScriptç‹¬è‡ªã®ã‚‚ã®ã§ã€Haskell ã®ç©ºã®ã‚¿ãƒ—ãƒ«`()`ã¨åŒã˜ã ãœã€‚ã€
é­”ç†æ²™ã€Œç¶šã„ã¦ã¯ã€`squareComponent`é–¢æ•°ã«ã¤ã„ã¦ã ã€‚ã€
é­”ç†æ²™ã€Œ`JE.button [ "class" := "square", on click \_ -> onClick ]`ã€
é­”ç†æ²™ã€Œ`[]`ã§å›²ã¾ã‚Œã¦ã„ã‚‹éƒ¨åˆ†ãŒã€buttonè¦ç´ ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã ã€‚ã€
é­”ç†æ²™ã€Œ`:=` ã¨ `on` ã¯ã€Jelly ã®ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã ã€‚CSSã®ã‚¯ãƒ©ã‚¹`square`ã‚’è¨­å®šã—ã¦ã€clickã—ãŸã¨ãã«é§†å‹•ã™ã‚‹`onClick`é–¢æ•°ã‚’ã€`on click \_ -> onClick`ã§è¨­å®šã—ã¦ã„ã‚‹ãœã€‚ã€
é­”ç†æ²™ã€Œ`textSig` ã‚‚ Jelly ã®é–¢æ•°ã ã€‚Signalå€¤ã‚’ç”»é¢è¡¨ç¤ºã—ãŸã„ã¨ãã¯ã€ã“ã®é–¢æ•°ã‚’ä½¿ã†ãœã€‚ã€
é­”ç†æ²™ã€Œã¾ãŸã€`textSig` ã®éƒ¨åˆ†ã¯ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã«ãªã£ã¦ã„ã‚‹ã€‚`value`ã®å€¤ã«å¿œã˜ã¦æ¡ä»¶åˆ†å²ã—ã¦ã„ã‚‹ãœã€‚ã€

### functor ã® `<$>` ã¨ `<#>`

é­”ç†æ²™ã€Œ`<#>` è¨˜å·ã¯ functor ã® mapFlipped ã ã€‚ã€
é­”ç†æ²™ã€Œã“ã‚Œã¯ã€functor ã® map `<$>` ã®äºœç¨®ã ãœã€‚ï¼ˆHaskellã§ã¯ fmapï¼‰ã€

https://pursuit.purescript.org/packages/purescript-prelude/3.0.0/docs/Data.Functor#v:(%3C#%3E)

éœŠå¤¢ã€Œã©ã†é•ã†ã®ï¼Ÿã€
é­”ç†æ²™ã€Œã¾ãš functor ã® map `<$>` ã«ã¤ã„ã¦èª¬æ˜ã—ã‚ˆã†ã€‚ã€
é­”ç†æ²™ã€Œé…åˆ—ã® map ã¯ã€ãƒªã‚¹ãƒˆ `[a]`å‹ã®`a`å‹ã®è¦ç´ ã«é–¢æ•°ã‚’é©ç”¨ã§ãã‚‹ã€‚ã€
é­”ç†æ²™ã€Œfunctor ã® map ã¯ã“ã‚Œã‚’ã•ã‚‰ã«ä¸€èˆ¬åŒ–ã—ãŸã‚‚ã®ã ã€‚ã€
é­”ç†æ²™ã€Œå‹ `f a` ã® `a`å‹ã«é–¢æ•°ã‚’é©ç”¨ã§ãã‚‹ã€‚ã€
é­”ç†æ²™ã€Œã“ã‚Œã§ãªã«ãŒã†ã‚Œã—ã„ã‹ã€‚ã€
é­”ç†æ²™ã€Œæ™®é€šã€`(a -> b)` ã®é–¢æ•°ã®å¼•æ•°ã«ã¯ã€`f a` ã®ã‚ˆã†ãªå‹ã‚’å–ã‚Œãªã„ã€‚å‹ãŒç•°ãªã‚‹ã‹ã‚‰ã ã€‚f a ã¨ã¯ä¾‹ãˆã°ã€Maybe a ã®ã‚ˆã†ãªå‹ã ã€‚ã€
é­”ç†æ²™ã€Œã ãŒã€functor ã® map ã‚’ä½¿ãˆã°ã€`(a -> b)` ã®é–¢æ•°ã®å¼•æ•°ã«`f a`ã‚’é©ç”¨ã§ãã‚‹ãœã€‚ã€
é­”ç†æ²™ã€Œãã—ã¦ã€functor ã® map `<$>` ã¯ã€å¼•æ•°ã‚’ãµãŸã¤ã¨ã‚‹ã€‚ã²ã¨ã¤ã¯é–¢æ•°`(a -> b)` ã¨`f a` ã®å€¤ã ã€‚ã€
é­”ç†æ²™ã€Œãã—ã¦ã€`<$>`ã¨`<#>`ã®é•ã„ã¯ã€å‹ã‚’è¦‹ã‚Œã°ã‚ã‹ã‚‹ã€‚ã€
é­”ç†æ²™ã€Œ`<$>` ã®å‹ã¯ã€`(a -> b) -> f a -> f b`[^2] ã€
é­”ç†æ²™ã€Œ`<#>` ã®å‹ã¯ã€`f a -> (a -> b) -> f b`ã€
é­”ç†æ²™ã€Œã¤ã¾ã‚Šã€å¼•æ•°ã§ã€é–¢æ•°ã¨`f a` ã®å€¤ã‚’ã¨ã‚‹é †ç•ªãŒé€†ã¨ã„ã†ã“ã¨ã ã€‚ã€
é­”ç†æ²™ã€Œä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã ã€‚ã€

```
é–¢æ•° <$> å€¤
ä¾‹ï¼‰
(\n -> n * n) <$> [1, 2, 3]

å€¤ <#> é–¢æ•°
ä¾‹ï¼‰
[1, 2, 3] <#> \n -> n * n
```

é­”ç†æ²™ã€Œ`case _ of` ã¯ã€`\x -> case x of` ã®ç•¥ã ã‹ã‚‰ã€ä»¥ä¸‹ã¯åŒã˜ã«ãªã‚‹ã€‚ã€

```purs
(\x -> case x of 
  Just X -> "X"
  Just O -> "O"
  Nothing -> "") <$> value
```

```purs
value <#> case _ of
  Just X -> "X"
  Just O -> "O"
  Nothing -> ""
```
## board ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆå‡ç›®ãŒçµ„ã¿åˆã‚ã•ã£ãŸç›¤å…¨ä½“ï¼‰

é­”ç†æ²™ã€Œæ¬¡ã¯ã€board ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ãœã€‚ã€

```js
class Board extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      squares: Array(9).fill(null),
      xIsNext: true,
    };
  }

  handleClick(i) {
    const squares = this.state.squares.slice();
    if (calculateWinner(squares) || squares[i]) {
      return;
    }
    squares[i] = this.state.xIsNext ? 'X' : 'O';
    this.setState({
      squares: squares,
      xIsNext: !this.state.xIsNext,
    });
  }

  renderSquare(i) {
    return (
      <Square
        value={this.state.squares[i]}
        onClick={() => this.handleClick(i)}
      />
    );
  }

  render() {
    const winner = calculateWinner(this.state.squares);
    let status;
    if (winner) {
      status = 'Winner: ' + winner;
    } else {
      status = 'Next player: ' + (this.state.xIsNext ? 'X' : 'O');
    }

    return (
      <div>
        <div className="status">{status}</div>
        <div className="board-row">
          {this.renderSquare(0)}
          {this.renderSquare(1)}
          {this.renderSquare(2)}
        </div>
        <div className="board-row">
          {this.renderSquare(3)}
          {this.renderSquare(4)}
          {this.renderSquare(5)}
        </div>
        <div className="board-row">
          {this.renderSquare(6)}
          {this.renderSquare(7)}
          {this.renderSquare(8)}
        </div>
      </div>
    );
  }
}
```

```purs:src/Components/Board.purs
module Components.Board
  ( boardComponent
  ) where

import Prelude

import Data.Array (replicate, updateAt, (!!))
import Data.Maybe (Maybe(..), fromMaybe)
import Data.Tuple.Nested ((/\))
import Effect.Class (class MonadEffect)
import Jelly.Component (class Component, textSig)
import Jelly.Element as JE
import Jelly.Prop ((:=))
import Jelly.Signal (Signal, newState, readSignal, writeChannel)
import Components.Square (squareComponent)
import UseCases.Calculatewinner (SquareValueType(..), calculateWinner, nextPlayer)

data GameState = Winner SquareValueType | NextPlayer SquareValueType

derive instance Eq GameState

boardComponent :: forall m. Component m => m Unit
boardComponent = do
  squareArraySig /\ squareArrayChannel <- newState $ replicate 9 Nothing
  gameStateSig /\ gameStateChannel <- newState $ NextPlayer X

  let
    handleClick :: MonadEffect m => Int -> m Unit
    handleClick i = do
      squares <- readSignal squareArraySig
      gameState <- readSignal gameStateSig
      case gameState of
        Winner _ -> pure unit
        NextPlayer p -> when ((squares !! i) == Just Nothing) do
          let
            newSquares = fromMaybe squares $ updateAt (i :: Int) (Just p) squares
          writeChannel squareArrayChannel newSquares
          writeChannel gameStateChannel $ case calculateWinner newSquares of
            Nothing -> NextPlayer $ nextPlayer p
            Just w -> Winner w

    renderSquareComponent :: Component m => Int -> m Unit
    renderSquareComponent valueInt = do
      let
        valSig = do
          squares <- squareArraySig
          pure $ join $ squares !! valueInt
      squareComponent { onClick: handleClick valueInt, value: valSig }

    playStatus :: Signal String
    playStatus = gameStateSig <#> case _ of
      NextPlayer p -> "Next player: " <> show p
      Winner w -> "Winner: " <> show w

  JE.div' do
    JE.div' do
      textSig $ playStatus
    JE.div' do
      JE.div [ "class" := "board-row" ] do
        renderSquareComponent 0
        renderSquareComponent 1
        renderSquareComponent 2
    JE.div' do
      JE.div [ "class" := "board-row" ] do
        renderSquareComponent 3
        renderSquareComponent 4
        renderSquareComponent 5
    JE.div' do
      JE.div [ "class" := "board-row" ] do
        renderSquareComponent 6
        renderSquareComponent 7
        renderSquareComponent 8

```

é­”ç†æ²™ã€Œã¾ãšã¯ã€ä»¥ä¸‹ã® `GameState` ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚ã€

```purs
data GameState = Winner SquareValueType | NextPlayer SquareValueType
```

é­”ç†æ²™ã€Œã“ã“ã¯ã€ã‚‚ã¨ã®JSã®ã‚³ãƒ¼ãƒ‰ã¨é•ã†éƒ¨åˆ†ã ã€‚ã€
é­”ç†æ²™ã€Œ`data SquareValueType = X | O`ã ã£ãŸã€‚ã€
é­”ç†æ²™ã€Œã“ã‚Œã¯ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’è¡¨ã™ãœã€‚å‹è€…ãŒã„ã‚‹çŠ¶æ…‹ã€‚`Winner SquareValueType`ã€
é­”ç†æ²™ã€Œã¤ã¾ã‚Šã€å‹è€…ãŒ `X` ã‹ `O` ã‹ã€‚ã€
é­”ç†æ²™ã€Œã¾ãŸã¯ã€å‹è€…ãŒã„ãªã„çŠ¶æ…‹ `NextPlayer SquareValueType` ã¯æ¬¡ã®æ‰‹ç•ªãŒã€æ¬¡ã®æ‰‹ç•ªãŒã€ `X` ã‹ `O` ã‹ã¨ã„ã†ã“ã¨ã ã€‚ã€
é­”ç†æ²™ã€Œã“ã®éƒ¨åˆ†ã¯ã€ã‚†ããã‚‰ã’ã•ã‚“ã«ææ¡ˆã—ã¦ã„ãŸã ã„ãŸãœã€‚ã€
éœŠå¤¢ã€Œè‡ªåˆ†ã§è€ƒãˆãªã•ã„ã‚ˆã€‚ã€
é­”ç†æ²™ã€Œæ¬¡ã¯ã€`boardComponent`å†…ã®ä¸‹ã®2è¡Œã ã€‚ã€
é­”ç†æ²™ã€Œ`Signal`ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’å®šç¾©ã—ã¦ã„ã‚‹ãœã€‚ã€

```purs
squareArraySig /\ squareArrayChannel <- newState $ replicate 9 Nothing
gameStateSig /\ gameStateChannel <- newState $ NextPlayer X
```

é­”ç†æ²™ã€Œ`newState`ã¨ã„ã†ã®ãŒã€Jelly ã®é–¢æ•°ã ã€‚å³å¯†ã«ã¯é•ã†ãŒã€ã‚¤ãƒ¡ãƒ¼ã‚¸çš„ã«ã¯ã€React Hooks ã® `useState` ã«ä¼¼ãŸåƒãã‚’ã™ã‚‹ã€‚ã€
é­”ç†æ²™ã€Œå®šç¾©ã—ãŸã„çŠ¶æ…‹ã®åˆæœŸå€¤ã‚’å¼•æ•°ã«ã¨ã‚‹ã®ã¯ã€useStateã¨åŒã˜ã ãªã€‚ã€
é­”ç†æ²™ã€Œãã—ã¦ã€`Signal` ã¨ `Channel` ã®ã‚¿ãƒ—ãƒ«ã‚’è¿”ã™é–¢æ•°ã ã€‚ã€
é­”ç†æ²™ã€Œ`Signal`ã¯ã€çŠ¶æ…‹ã€‚ãã—ã¦ã€ `Channel` ã‚’ä½¿ã£ã¦ã€çŠ¶æ…‹ã®æ›¸ãè¾¼ã¿ãŒã§ãã‚‹ãœã€‚ã€
é­”ç†æ²™ã€Œ`replicate 9 Nothing` ã§ã€`Nothing` ãŒ9å€‹ã®é…åˆ—ã‚’ä½œã‚‹ã€‚ã€

```purs
[Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing]
```
### handleClick

é­”ç†æ²™ã€Œ`handleClick` é–¢æ•°ã€‚ã“ã‚Œã¯clickã—ãŸã¨ãã®å‡¦ç†ã ã€‚ã€
é­”ç†æ²™ã€Œclickã—ã¦ã€å†…éƒ¨ã®çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹å‰¯ä½œç”¨ãŒã‚ã‚‹éƒ¨åˆ†ã ãœã€‚ã€
é­”ç†æ²™ã€Œã“ã‚Œã¯å‹ãŒé›£ã—ã„ã€‚ã€

```purs
handleClick :: MonadEffect m => Int -> m Unit
```

é­”ç†æ²™ã€Œ`MonadEffect`ã¯ã€`m` ãŒãã®ä¸­ã§å‰¯ä½œç”¨ã‚’èµ·ã“ã›ã‚‹ãƒ¢ãƒŠãƒ‰ã ã¨ã„ã†ã“ã¨ã‚’è¡¨ã™å‹ã‚¯ãƒ©ã‚¹ã ã€‚ã€
é­”ç†æ²™ã€Œå…·ä½“çš„ã«ã¯ã€Jelly ã®é–¢æ•° `writeChannel` ãŒçŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ã€‚ã“ã‚ŒãŒã€å‰¯ä½œç”¨ã‚’èµ·ã“ã›ã‚‹ãƒ¢ãƒŠãƒ‰ã ã€‚ã€
é­”ç†æ²™ã€Œã¤ãã«ã€ã‚‚ã¨ã®JSã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã¨ã€`if (calculateWinner(squares) || squares[i]) {â€¦â€¦`ã§ã‚¢ãƒ¼ãƒªãƒ¼ãƒªã‚¿ãƒ¼ãƒ³ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚ã€
é­”ç†æ²™ã€Œã¤ã¾ã‚Šã€â‘ å‹è€…ãŒã™ã§ã«ã„ã‚‹å ´åˆâ‘¡clickã—ãŸå‡ç›®ãŒclickæ¸ˆã¿ï¼ˆã™ã§ã«å€¤ãŒå…¥ã£ã¦ã„ã‚‹ï¼‰å ´åˆã¯ã€clickã—ã¦ã‚‚ã€ä½•ã‚‚åå¿œã—ãªãã™ã‚‹ã¨ã„ã†ã“ã¨ã ã€‚ã€
é­”ç†æ²™ã€ŒPureScriptã«ã¯ã€ã‚¢ãƒ¼ãƒªãƒ¼ãƒªã‚¿ãƒ¼ãƒ³ãŒãªã„ã‹ã‚‰ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã¨`when`ã‚’ä½¿ã£ã¦å®Ÿè£…ã—ã¦ã„ããœã€‚ã€
é­”ç†æ²™ã€Œã¾ãšã€ã€

```purs
case gameState of
  Winner _ -> pure unit
```

é­”ç†æ²™ã€Œã¤ã¾ã‚Šã€â‘ å‹è€…ãŒã™ã§ã«ã„ã‚‹å ´åˆã¯ã€`pure unit`ã€‚ã€
é­”ç†æ²™ã€Œä½•ã‚‚ã—ãªã„ã¨ã„ã†ã“ã¨ã ãªã€‚ã€
é­”ç†æ²™ã€Œã¤ãã«ã€ã€

```purs
NextPlayer player -> when ((squares !! i) == Just Nothing) do
```

é­”ç†æ²™ã€Œå‹è€…ãŒã„ãªã„æ¬¡ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒã„ã‚‹å ´åˆ`NextPlayer player`ã ã€‚ã€
é­”ç†æ²™ã€Œ`when`ã¨ã„ã†ã®ã¯ã€æ¡ä»¶ç¯€ã§ã€`whenâ€¦`ãŒtrueã®ã¨ãã€å®Ÿè¡Œã™ã‚‹ã¨ã„ã†ã“ã¨ã ã€‚ã€
é­”ç†æ²™ã€Œâ‘¡clickã—ãŸå‡ç›®ãŒclickæ¸ˆã¿ï¼ˆã™ã§ã«å€¤ãŒå…¥ã£ã¦ã„ã‚‹ï¼‰ã®å¦å®šã¯ã€å€¤ãŒã€`Just Nothing`ã®ã¨ãã ã€‚ã“ã®æ™‚ã€å€¤ã‚’æ›´æ–°ã™ã‚‹ã€‚ã€
é­”ç†æ²™ã€ŒJelly ã® `writeChannel` ã§ã€çŠ¶æ…‹ã‚’æ›¸ãè¾¼ã‚ã‚‹ãœã€‚ã€

```purs
writeChannel :: forall m a. MonadEffect m => Channel a -> a -> m Unit
```

é­”ç†æ²™ã€Œ`writeChannel`ã®å¼•æ•°ã¯ã€`a`ã ã€‚ã€
é­”ç†æ²™ã€Œã ã‹ã‚‰ã€ã‚³ãƒ¼ãƒ‰ãŒã‚„ã‚„ã•ã‹ã®ã¼ã‚‹ãŒã€`readSignal`ã®å‹ã¯ä»¥ä¸‹ã ã€‚ã€

```purs
readSignal :: forall m a. MonadEffect m => Signal a -> m a
```

é­”ç†æ²™ã€Œã¤ã¾ã‚Šã€`readSignal` ã¯`Signal a`ã‹ã‚‰`Signal`ã‚’ã¯ãŒã™ã‚“ã ãœã€‚ã€
é­”ç†æ²™ã€Œ`Signal`ã®å–å¾—ã®æ›¸ãæ–¹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä½•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚ã‚‹ãŒã€ã“ã“ã¯`Signal`å–å¾—ã®ã¨ãã«ã€`writeChannel`ã§æ›¸ãè¾¼ã¿ãŸã‚ã«ã€`readSignal`ã§`Signal`ã‚’ã¯ãŒã™å¿…è¦ãŒã‚ã£ãŸã‚“ã ã€‚ã€
éœŠå¤¢ã€Œãªã‚‹ã»ã©ã­ã€‚ã€
### renderSquareComponent

é­”ç†æ²™ã€Œ`renderSquareComponent`ã«ã¤ã„ã¦ã ã€‚ã€
é­”ç†æ²™ã€Œ`squareComponent { onClick: handleClick valueInt, value: valSig }`ã¨9å›ã‹ãã®ã¯ã€å¤§å¤‰ãªã®ã§ã€ã‚‚ã¨ã®Reactã®ä¾‹ã®ã‚ˆã†ã«ã€`renderSquareComponent`ã«å‡ã®indexã®æ•°å­—ã‚’å…¥ã‚Œã‚‹ã ã‘ã«ã—ãŸã„ã‚“ã ãœã€‚ã€

```purs
renderSquareComponent :: Component m => Int -> m Unit
renderSquareComponent valueInt = do
  let
    valSig :: Signal (Maybe SquareValueType)
    valSig = do
      squares <- squareArraySig
      pure $ join $ squares !! valueInt
  squareComponent { onClick: handleClick valueInt, value: valSig }
```
é­”ç†æ²™ã€Œ`Signal`ã¯ãƒ¢ãƒŠãƒ‰ã ã‹ã‚‰ã€doæ§‹æ–‡ãŒä½¿ãˆã‚‹ã€‚ã€
é­”ç†æ²™ã€Œã“ã“ã¯ã€`squareComponent`ã®å¼•æ•°ã§ã€`Signal`ã‚’ã¨ã‚‹ã‹ã‚‰ã€`readSignal` ã‚’ä½¿ã†å¿…è¦ã¯ãªã„ãœã€‚ã€

## playStatus

```purs
playStatus :: Signal String
playStatus = gameStateSig <#> case _ of
  NextPlayer player -> "Next player: " <> show player
  Winner winner -> "Winner: " <> show winner
```

é­”ç†æ²™ã€Œã¾ãŸã€`hogeSig <#> case _ of`å‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ãŒå‡ºã¦ããŸãªã€‚ã€
é­”ç†æ²™ã€Œã“ã“ã‚‚`playStatus`è‡ªä½“ãŒ`Signal`ã ã‹ã‚‰ã€`readSignal` ã‚’ä½¿ã†å¿…è¦ã¯ãªã„ãœã€‚ã€
é­”ç†æ²™ã€Œå½¢ã¯é•ã†ãŒã€ä¸€å¿œã€

```purs
do
  gameStatus <- gameStatusSig
```

é­”ç†æ²™ã€Œã¨åŒã˜ã ãœã€‚ã€

## root ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```purs:src/Main.purs
module Main where

import Prelude

import Data.Foldable (traverse_)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import Jelly.Aff (awaitBody)
import Jelly.Component (class Component)
import Jelly.Element as JE
import Jelly.Hooks (runHooks_)
import Jelly.Hydrate (mount)
import Jelly.Prop ((:=))

import Components.Board (boardComponent)

main :: Effect Unit
main = launchAff_ do
  bodyMaybe <- awaitBody
  liftEffect $ traverse_ (runHooks_ <<< mount rootComponent) bodyMaybe

rootComponent :: forall m. Component m => m Unit
rootComponent =
  JE.div [ "class" := "game" ] do
    JE.div [ "class" := "game-board" ] do
      boardComponent

```

[^1]: è¥¿éƒ·ç”²çŸ¢äººã€èƒ½ç¾åä¸‰ã€åœè«–ã®é“æ¡ˆå†… ~çŸ¢å°ã§ãˆãŒãæ•°å­¦ã®ä¸–ç•Œ~ã€æŠ€è¡“è©•è«–ç¤¾ Kindleç‰ˆ ä½ç½®No.3983/4269
[^2]: https://github.com/purescript/purescript-prelude/blob/v3.0.0/src/Data/Functor.purs#L24